---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import { SearchPage } from '../templates/SearchPage';
import { PageWithTitle } from '../templates/PageWithTitle';

const entries = await getCollection('recipes');
const recipes = entries.map(({ data }) => ({
	createdAt: data.createdAt,
	cuisines: data.cuisines,
	dairyFree: data.dairyFree,
	glutenFree: data.glutenFree,
	images: data.images,
	ingredients: data.ingredients,
	keywords: data.keywords,
	lowGluten: data.lowGluten,
	favorite: data.favorite,
	noAddedSugar: data.noAddedSugar,
	overnight: data.overnight,
	seasons: data.seasons,
	slug: data.slug,
	tags: data.tags,
	time: data.time,
	title: data.title,
	titleEnglish: data.titleEnglish,
	vegan: data.vegan,
	vegetarian: data.vegetarian,
}));
---

<Layout url="/search/" pageTitle="Search recipes on Tacohuaco">
	<PageWithTitle url="/search/" title="Search">
		<SearchPage recipes={recipes} client:idle />
	</PageWithTitle>
</Layout>
